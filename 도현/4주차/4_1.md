## 미들웨어

### redux-thunk
1. 하나의 action에서 여러개의 disfatch를 넣을수 있다. 
2. 비동기 action하나에 동기 action여러개를 구현할수 있다.
3. 지연의 의미 disfatch를 나중에 한번에 하는 의미

request, sucess, failure 의 세단계가 있다.

### redus-saga
1. delay기능 가능 (  몇초뒤에 action)
2. throttle 기능 (셀프 디도스 (스크롤 내릴시에 요청이 여러개가 한번에)) 1초에 데이터 량 통제
   (1초에 몇번이상 요청할시 기능정지)

### generator
1. saga의 활용방법
2. 제너레이터와 제네릭 헷갈리지 말것
3. 제네릭은 타입을 지정
4. yield 를 사용하여 중단점이 있는 함수이다. (함수를 실행할때 멈추고 멈춘상태의 값을 value로 받을수 있다 단 설정해야함)
5. while을 사용한다면 무한의 개념으로 사용이 가능하다. (무한의 eventlistener)
6. fork나 call을 제너레이터함수를 실행시킨다.
  - fork: 논블로킹! 결과값에 상관없이 바로 다음경우로 넘어감
  - call: 결과값을 받아올때 까지 기다림(.then 을 사용하는 느낌)
7. 성공결과: result.data 실패결과: err.response.data 에 담겨있음
8. take ... while 대체 takeevery로 대체 
9. takelatest 두번 연속으로 게시글이 업로드 되는 것을 방지
  - 같은 값의 로딩이 2개가 있다면 뒤의 1개만 남음 
  - 요청은 2개 가지만 응댑은 1개가 온다 (서버에는 값 2개 생성)
  - 그럴 땐 throttle 초단위로 설정해서 요청보내는것까지 (1번) 막는다.
  - *thunk는 다 직접적으로 구현해야 한다.*
10. delay는 settimeout과 같은 비동기효과 줌  서버없을시에 구현

 * debounce와 throtle 차이
  - debounce: ajax 검색에서 주로 사용
  - 검색창에 한모음당 검색결과가 나오는 것이 아닌 엔터를 쳤을때 요청 
  - 타자를 칠때 설정한 타임값 안에서 입력이 없으면 입력이 끝난것으로 간주

  - throtle: 스크롤을 올리거나 내릴때 사용

정리
saga의 액션명이 문자열로 되어있으면 변수값으로 지정을 해주자

eslint는 extends에서 recommend가 아닌 airbnb를 사용 (엄격하게)

postreducer와 usereducer상태를 한번에 바꿀수 없으니 두개의 액션으로 각각 만들어줘야 함

immer를 도입하여 불변성을 확인하는 코드를 줄일수 있다.!!

리덕스를 사용하다보면 코드량이 많은데 코드의 규칙이나 이름, 코드량을 줄여주는 라이브러리(immer와 같은)를 잘 사용해야 한다.

* 더미데이터 사용법
faker.js를 사용하여 이미지태그는 로렘의 이미지보다는 placeholder를 사용할것

* 리덕스 툴킷
  - 리덕스에서 만든 라이브러리
  - 코드문이 긴 스위치문대신에 state를 사용하여 코드문 간소화

* 인피니트 스크롤
  - 알아서 10개를 불러오니 처음 10개를 불러오는 로직 불필요
  - 맨 하단에 스크롤시 로딩이 되는게 아닌 하단의 300px위에서 스크롤이 가있을때 리퀘스트요청 할것
  - 로딩이 느려지는 이유중에 하나는 스크롤이벤트가 많아서 그러는데 리퀘스트를 한번만 보낼수있는 방법을 찾아야 한다.
    - 로딩이 아닐때만 스크롤이벤트 실행(조건문 활용)  (hasmorepost , loadpostsLoading 참고)

* 리액트 버추얼라이즈 (react-virtualized)
  - 수천개 계속 본다면 메모리가 터질수 있다.
  - 인스타에서는 3개만 보여주고 나머지의 게시글은 메모리에 담겨있다. (이미 수백개는 로딩되어있음)

* usedisfatch를 사용하여 액션을 실행!! 아주 중요!!

* 데이터를 지울시에 필터와 splice를  사용하는데 splice를 써야 불변성을 안지킬수 있다.














