## 서버사이드랜더
- 클라이언트사이드랜더링은 과정이 브라우저->프론트->서버
- 서버사이드랜더링은 브라우저->서버 로 초기 요청속도가 빠르다.

#### 조금이라도 디펜던시들이 없는게` 프로젝트에 도움이 된다.(필요없는 라이브러리는 제거할 것)

메인페이지에 접속했을때 useEffect를 통해서 사용자정보와 사용자포스트를 불러오는데

이러한 방법보다는 getinitialprops (next8버전)을 사용하지만 next9버전에서는 getserversideprops를 사용한다.
위의 부분이 화면을 그리기전에 서버에서 먼저 실행된다.

 rootreducer구조를 reducer의 index안에 있는 형태가 아닌 덮어씌우는 형태로 재코딩
 
리퀘스트값이 false->true로 바뀔때까지 기다려주는 값이 필요하다
-> store.disptch(END) 를 사용   (서버사이드렌더링을 위해 사용하면 데이터가 미리 차있는 모습을 확인가능)

## ssr시 쿠키 공유
- csr시 cors오류와 크레덴셜 오류로 쿠키값이 서버로 전송이 안됐었다
- 프론트와 서버의 서버주소가 다르면 쿠키전송이 안됀다 그렇다면 크레덴셜의 값을 true로 수기변경해야한다
- 하지만 받는쪽은 이미 변경했으니 보내는 쪽(프론트서버)를 확인해본다

## 로그인시 쿠키의 겹침으로 다른사람에게 내쿠키를 공유될수 있는 위험성 제거
유저의 헤더에 쿠키가 없을경우 
Axios.default.headers.cookes = cookie; 를 사용한다 
-> 하지만 위의 코드를 user단에서 사용할경우 다음 사용자에게도 내 쿠키를 공유할수 있는 위험이 있어 조건문으로 그러한 위험을 제거한다.
서버일경우와 쿠키를 보유한 경우 if(context.req && cookie){} 의 형식안에 코드를 사용한다


getstaticprops는 html로 구성이 되기 때문에 데이터가 계속 변하는 요즘 서비스상 적용하기 힘들다

따라서 요즘은 getserversideprops를 사용한다. 

### 다이나믹 라우팅
포스팅 페이지에 대해서 파일을 만들때 [id].js라는 방식으로 파일을 생성한다.
 
### css 서버사이드렌더링
바벨플러그인 스타일드 컴포넌트 라이브러리를 활용하여 css의 서버사이드렌더링을 구현하자
app.js를 감싸는 _document.js파일을 생성하고 getinitialprops메서드를 사용한다. 

### swr 사용

load할때 코드의 양을 줄여준다.
기존에 disfatch로 구현한 로드 데이터를 swr의 (data,err) = useSWR(주소,fetcher)로 대체한다.

- 미들웨어는 위에서 아래로 왼쪽에서 오른쪽으로 흐름이 이어지는데 중간에 params에 잘못빠지면 데이터를 찾지 못하게 떄문에
404 error를 띄우게 된다. 따라서 좁은 범위의 params를 위로올려 오류를 방지한다.

### 커스텀 웹팩과 bundle-analyzer
bundle-analyzer로 클라이언트 단의 라이브러리를 정리하자 (안쓰는 라이브러리를 커스텀하여 import시키자) 


